Vagrant.configure('2') do |config|
  config.vm.box = "trusty64"

  config.vm.define :control do |control|
    control.vm.hostname = "controller"
    control.vm.network :public_network
    control.vm.network :private_network, ip: "192.168.122.10"
    control.vm.provider :kvm do |kvm, override|
      kvm.memory_size     = '4096m'
    end
    control.vm.provider :libvirt do |libvirt, override|
      libvirt.memory = 2048
      libvirt.nested = true
    end
  end

  config.vm.define :network do |network|
    network.vm.hostname = "network"
    network.vm.network :public_network
    network.vm.network :private_network, ip: "192.168.122.12"
    network.vm.provider :kvm do |kvm, override|
      kvm.memory_size     = '4096m'
    end
    network.vm.provider :libvirt do |libvirt, override|
      libvirt.memory = 4096
      libvirt.nested = true
    end
  end

end